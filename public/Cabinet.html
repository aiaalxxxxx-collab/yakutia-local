<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta
        name="viewport"
        content="width=device-width, initial-scale=1.0"
    />
    <title data-i18n="cabinet.title">Yakutia Local — Личный кабинет</title>

    <link rel="stylesheet" href="./assets/css/main.css" />
</head>
<body>
<header class="header">
    <div class="header__left">
        <a href="./index.html" class="header__logo" data-i18n="header.logo">
            Yakutia Local
        </a>
    </div>
    <div class="header__right">
        <select
            id="language-select"
            class="header__lang-select"
            aria-label="Выбор языка"
        >
            <option value="ru">RU</option>
            <option value="en">EN</option>
        </select>

        <button
            id="cart-button"
            class="header__icon-button"
            data-i18n="header.cart"
        >
            Корзина
        </button>
        <button
            id="orders-button"
            class="header__icon-button"
            data-i18n="header.orders"
        >
            Мои заказы
        </button>

        <div id="auth-block" class="header__auth">
            <!-- JS подставит имя пользователя и роль -->
            <span id="current-user-name" class="header__user-name">
                Иван (роль: продавец)
            </span>
            <button
                id="logout-button"
                class="header__auth-button"
                data-i18n="header.logout"
            >
                Выйти
            </button>
        </div>
    </div>
</header>

<main class="main main--cabinet">
    <section class="cabinet">
        <header class="cabinet__header">
            <h1 class="cabinet__title" data-i18n="cabinet.mainTitle">
                Личный кабинет
            </h1>
            <p class="cabinet__subtitle" data-i18n="cabinet.subtitle">
                Управляйте профилем, объявлениями, заказами и доставкой в одном месте.
            </p>
        </header>

        <!-- Вкладки ролей: покупатель / продавец / курьер -->
        <nav class="cabinet__role-tabs" aria-label="Выбор роли">
            <button
                class="cabinet__role-tab cabinet__role-tab--active"
                data-role="buyer"
                data-i18n="cabinet.roles.buyer"
            >
                Покупатель
            </button>
            <button
                class="cabinet__role-tab"
                data-role="seller"
                data-i18n="cabinet.roles.seller"
            >
                Продавец
            </button>
            <button
                class="cabinet__role-tab"
                data-role="courier"
                data-i18n="cabinet.roles.courier"
            >
                Курьер
            </button>
        </nav>

        <!-- ========== БЛОК ПОКУПАТЕЛЯ ========== -->
        <section
            id="cabinet-buyer"
            class="cabinet__role-panel cabinet__role-panel--active"
            aria-label="Кабинет покупателя"
        >
            <div class="cabinet__grid">
                <!-- Профиль покупателя -->
                <article class="cabinet-card">
                    <h2 class="cabinet-card__title" data-i18n="cabinet.buyer.profile">
                        Профиль покупателя
                    </h2>
                    <form id="buyer-profile-form" class="form">
                        <!-- Комментарий: эти данные в боевой версии сохраняются в users.json / БД -->
                        <label class="form__field">
                            <span class="form__label">Имя</span>
                            <input type="text" name="name" class="form__input" />
                        </label>
                        <label class="form__field">
                            <span class="form__label">Телефон</span>
                            <input type="tel" name="phone" class="form__input" />
                        </label>
                        <label class="form__field">
                            <span class="form__label">E‑mail</span>
                            <input type="email" name="email" class="form__input" />
                        </label>
                        <label class="form__field">
                            <span class="form__label">Адрес доставки</span>
                            <textarea
                                name="address"
                                class="form__textarea"
                            ></textarea>
                        </label>
                        <button
                            type="submit"
                            class="form__submit"
                            data-i18n="cabinet.save"
                        >
                            Сохранить
                        </button>
                    </form>
                </article>

                <!-- Избранные товары -->
                <article class="cabinet-card">
                    <h2 class="cabinet-card__title" data-i18n="cabinet.buyer.favorites">
                        Понравившиеся товары
                    </h2>
                    <p class="cabinet-card__subtitle">
                        Здесь показываются все товары, которые вы добавили в избранное на главной странице.
                    </p>
                    <div
                        id="buyer-favorites-list"
                        class="cabinet-card__list cabinet-card__list--products"
                    >
                        <!-- Список избранных товаров покупателя -->
                    </div>
                </article>

                <!-- Заказы покупателя -->
                <article class="cabinet-card">
                    <h2 class="cabinet-card__title" data-i18n="cabinet.buyer.orders">
                        Мои заказы
                    </h2>
                    <div
                        id="buyer-orders-list"
                        class="cabinet-card__list cabinet-card__list--orders"
                    >
                        <!-- Список заказов покупателя -->
                    </div>
                </article>
            </div>
        </section>

        <!-- ========== БЛОК ПРОДАВЦА ========== -->
        <section
            id="cabinet-seller"
            class="cabinet__role-panel"
            aria-label="Кабинет продавца"
        >
            <div class="cabinet__grid">
                <!-- Профиль продавца -->
                <article class="cabinet-card">
                    <h2 class="cabinet-card__title" data-i18n="cabinet.seller.profile">
                        Профиль продавца
                    </h2>
                    <p class="cabinet-card__subtitle" data-i18n="cabinet.seller.profileHint">
                        Заполните данные, чтобы покупатели лучше понимали, кто вы.
                    </p>
                    <form id="seller-profile-form" class="form">
                        <label class="form__field">
                            <span class="form__label">Название магазина / ИП</span>
                            <input type="text" name="shopName" class="form__input" />
                        </label>
                        <label class="form__field">
                            <span class="form__label">Контактное лицо</span>
                            <input type="text" name="contactName" class="form__input" />
                        </label>
                        <label class="form__field">
                            <span class="form__label">Телефон</span>
                            <input type="tel" name="phone" class="form__input" />
                        </label>
                        <label class="form__field">
                            <span class="form__label">E‑mail</span>
                            <input type="email" name="email" class="form__input" />
                        </label>
                        <label class="form__field">
                            <span class="form__label">Описание</span>
                            <textarea
                                name="description"
                                class="form__textarea"
                            ></textarea>
                        </label>
                        <button
                            type="submit"
                            class="form__submit"
                            data-i18n="cabinet.save"
                        >
                            Сохранить
                        </button>
                    </form>
                </article>

                <!-- Статистика продавца -->
                <article class="cabinet-card">
                    <h2 class="cabinet-card__title" data-i18n="cabinet.seller.stats">
                        Статистика
                    </h2>
                    <div class="stats">
                        <div class="stats__item">
                            <span class="stats__label" data-i18n="cabinet.seller.stats.orders">
                                Заказы
                            </span>
                            <span
                                id="seller-stats-orders"
                                class="stats__value"
                            >
                                0
                            </span>
                        </div>
                        <div class="stats__item">
                            <span class="stats__label" data-i18n="cabinet.seller.stats.products">
                                Опубликовано объявлений
                            </span>
                            <span
                                id="seller-stats-products"
                                class="stats__value"
                            >
                                0
                            </span>
                        </div>
                        <div class="stats__item">
                            <span class="stats__label" data-i18n="cabinet.seller.stats.favorites">
                                В избранном у покупателей
                            </span>
                            <span
                                id="seller-stats-favorites"
                                class="stats__value"
                            >
                                0
                            </span>
                        </div>
                    </div>
                    <!--
                        Комментарий:
                        В боевой версии эти значения берутся из orders.json / favorites.json / products.json
                        и обновляются при каждой операции.
                    -->
                </article>

                <!-- Мои объявления -->
                <article class="cabinet-card cabinet-card--full">
                    <div class="cabinet-card__header-row">
                        <h2 class="cabinet-card__title" data-i18n="cabinet.seller.products">
                            Мои объявления
                        </h2>
                        <button
                            id="seller-add-product-button"
                            class="cabinet-card__action-button"
                            data-i18n="cabinet.seller.addProduct"
                        >
                            Добавить объявление
                        </button>
                    </div>
                    <p class="cabinet-card__subtitle">
                        Здесь вы можете создавать, редактировать и удалять свои товары. Картинки загружаются на сервер и отображаются на главной странице.
                    </p>

                    <!-- Список объявлений продавца -->
                    <div
                        id="seller-products-list"
                        class="cabinet-card__list cabinet-card__list--products"
                    >
                        <!-- Карточки объявлений продавца (мини‑список) -->
                    </div>
                </article>
            </div>
        </section>

        <!-- ========== БЛОК КУРЬЕРА ========== -->
        <section
            id="cabinet-courier"
            class="cabinet__role-panel"
            aria-label="Кабинет курьера"
        >
            <div class="cabinet__grid">
                <!-- Профиль курьера -->
                <article class="cabinet-card">
                    <h2 class="cabinet-card__title" data-i18n="cabinet.courier.profile">
                        Профиль курьера
                    </h2>
                    <form id="courier-profile-form" class="form">
                        <label class="form__field">
                            <span class="form__label">Имя</span>
                            <input type="text" name="name" class="form__input" />
                        </label>
                        <label class="form__field">
                            <span class="form__label">Телефон</span>
                            <input type="tel" name="phone" class="form__input" />
                        </label>
                        <label class="form__field">
                            <span class="form__label">Районы работы</span>
                            <input type="text" name="areas" class="form__input" />
                        </label>
                        <label class="form__field">
                            <span class="form__label">Тип транспорта</span>
                            <input type="text" name="transport" class="form__input" />
                        </label>
                        <button
                            type="submit"
                            class="form__submit"
                            data-i18n="cabinet.save"
                        >
                            Сохранить
                        </button>
                    </form>
                </article>

                <!-- Активные заказы курьера -->
                <article class="cabinet-card">
                    <h2 class="cabinet-card__title" data-i18n="cabinet.courier.activeOrders">
                        Активные заказы для доставки
                    </h2>
                    <div
                        id="courier-active-orders"
                        class="cabinet-card__list cabinet-card__list--orders"
                    >
                        <!-- Список заказов, назначенных этому курьеру -->
                    </div>
                </article>

                <!-- История доставок -->
                <article class="cabinet-card">
                    <h2 class="cabinet-card__title" data-i18n="cabinet.courier.history">
                        История доставок
                    </h2>
                    <div
                        id="courier-history"
                        class="cabinet-card__list cabinet-card__list--orders"
                    >
                        <!-- История выполненных доставок -->
                    </div>
                </article>
            </div>
        </section>
    </section>
</main>

<!-- ========== МОДАЛКА СОЗДАНИЯ/РЕДАКТИРОВАНИЯ ОБЪЯВЛЕНИЯ ПРОДАВЦА ========== -->
<div
    id="product-edit-modal"
    class="modal"
    aria-hidden="true"
>
    <div
        class="modal__overlay"
        data-modal-close
    ></div>
    <div class="modal__content modal__content--wide">
        <header class="modal__header">
            <h3
                id="product-edit-title"
                class="modal__title"
            >
                Новое объявление
            </h3>
            <button
                class="modal__close-button"
                data-modal-close
            >
                &times;
            </button>
        </header>
        <div class="modal__body">
            <!-- Форма товара -->
            <form id="product-edit-form" class="form form--two-columns">
                <input type="hidden" name="id" />

                <label class="form__field">
                    <span class="form__label">Название</span>
                    <input type="text" name="title" class="form__input" required />
                </label>
                <label class="form__field">
                    <span class="form__label">Цена, ₽</span>
                    <input
                        type="number"
                        name="price"
                        class="form__input"
                        min="0"
                        required
                    />
                </label>
                <label class="form__field">
                    <span class="form__label">Старая цена, ₽ (если есть)</span>
                    <input
                        type="number"
                        name="oldPrice"
                        class="form__input"
                        min="0"
                    />
                </label>
                <label class="form__field">
                    <span class="form__label">Скидка, %</span>
                    <input
                        type="number"
                        name="discount"
                        class="form__input"
                        min="0"
                        max="100"
                    />
                </label>
                <label class="form__field">
                    <span class="form__label">Категория</span>
                    <select name="category" class="form__select">
                        <option value="meat">Мясо и рыба</option>
                        <option value="milk">Молочные продукты</option>
                        <option value="berries">Ягоды и дикоросы</option>
                        <option value="ready">Готовые блюда</option>
                        <option value="other">Другое</option>
                    </select>
                </label>
                <label class="form__field">
                    <span class="form__label">Локация</span>
                    <input
                        type="text"
                        name="place"
                        class="form__input"
                        placeholder="Якутск, район, формат выдачи"
                    />
                </label>

                <label class="form__field form__field--full">
                    <span class="form__label">Описание</span>
                    <textarea
                        name="desc"
                        class="form__textarea"
                        rows="3"
                    ></textarea>
                </label>

                <!-- Картинка товара -->
                <label class="form__field form__field--full">
                    <span class="form__label">Картинка товара</span>
                    <!--
                        Комментарий:
                        В боевой версии файл отправляется на /api/upload,
                        а полученный URL записывается в поле imageUrl товара.
                    -->
                    <input
                        type="file"
                        name="image"
                        accept="image/*"
                        class="form__input"
                    />
                    <div class="form__image-preview">
                        <img
                            id="product-image-preview"
                            src=""
                            alt=""
                            hidden
                        />
                    </div>
                </label>

                <!-- Доп. параметры -->
                <label class="form__field">
                    <span class="form__label">
                        Выделить как продвигаемое объявление
                    </span>
                    <input
                        type="checkbox"
                        name="promoted"
                        class="form__checkbox"
                    />
                </label>
                <label class="form__field">
                    <span class="form__label">
                        Товар по акции
                    </span>
                    <input
                        type="checkbox"
                        name="isSale"
                        class="form__checkbox"
                    />
                </label>

                <div class="form__actions form__actions--full">
                    <button
                        type="submit"
                        class="form__submit"
                    >
                        Сохранить объявление
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- ========== МОДАЛКИ КОРЗИНЫ И ЗАКАЗОВ (ПЕРЕИСПОЛЬЗУЕМ ИЗ index) ========== -->
<div
    id="cart-modal"
    class="modal"
    aria-hidden="true"
>
    <div
        class="modal__overlay"
        data-modal-close
    ></div>
    <div class="modal__content">
        <header class="modal__header">
            <h3
                class="modal__title"
                data-i18n="cart.title"
            >
                Моя корзина
            </h3>
            <button
                class="modal__close-button"
                data-modal-close
            >
                &times;
            </button>
        </header>
        <div
            id="cart-items"
            class="modal__body"
        ></div>
        <footer class="modal__footer">
            <div class="modal__footer-row">
                <span data-i18n="cart.total">Итого:</span>
                <span id="cart-total-amount">0 ₽</span>
            </div>
            <button
                id="cart-checkout"
                class="modal__primary-button"
                data-i18n="cart.checkout"
            >
                Оформить заказ
            </button>
        </footer>
    </div>
</div>

<div
    id="orders-modal"
    class="modal"
    aria-hidden="true"
>
    <div
        class="modal__overlay"
        data-modal-close
    ></div>
    <div class="modal__content">
        <header class="modal__header">
            <h3
                class="modal__title"
                data-i18n="orders.title"
            >
                Мои заказы
            </h3>
            <button
                class="modal__close-button"
                data-modal-close
            >
                &times;
            </button>
        </header>
        <div
            id="orders-list"
            class="modal__body"
        ></div>
    </div>
</div>

    <!-- ========== ВИДЖЕТ ИИ-БОТА ========== -->
    <div class="bot-widget">
        <button
            id="bot-toggle"
            class="bot-widget__button"
            data-i18n="bot.help"
        >
            Нужна помощь?
        </button>
        <div
            id="bot-panel"
            class="bot-widget__panel"
            hidden
        >
            <div
                id="bot-messages"
                class="bot-widget__messages"
            ></div>
            <div class="bot-widget__footer">
                <input
                    type="text"
                    id="bot-input"
                    class="bot-widget__input"
                    placeholder="Спросите о настройке кабинета..."
                    data-i18n-placeholder="bot.placeholderCabinet"
                />
                <button
                    id="bot-send"
                    class="bot-widget__send"
                    data-i18n="bot.send"
                >
                    ▶
                </button>
            </div>
        </div>
    </div>

    <!-- ========== ПОДВАЛ ========== -->
    <footer class="footer">
        <div class="footer__inner">
            <span data-i18n="footer.copy">
                © Yakutia Local. Все права защищены.
            </span>
            <a
                href="#"
                class="footer__link"
                data-i18n="footer.about"
            >
                О проекте
            </a>
            <a
                href="#"
                class="footer__link"
                data-i18n="footer.contacts"
            >
                Контакты
            </a>
        </div>
    </footer>

    <!-- ========== СКРИПТЫ ДЛЯ КАБИНЕТА ========== -->
    <script src="./assets/js/api/apiClient.js"></script>
    <script src="./assets/js/api/productsApi.js"></script>
    <script src="./assets/js/api/usersApi.js"></script>
    <script src="./assets/js/pages/cabinetPage.js"></script>
</body>
</html>

