/* --- MATERIAL DESIGN 3 TOKENS --- */
:root {
    /* Core Colors (Google Blue theme) */
    --md-sys-color-primary: #00639b;
    --md-sys-color-on-primary: #ffffff;
    --md-sys-color-primary-container: #cce5ff;
    --md-sys-color-on-primary-container: #001d32;
    
    --md-sys-color-secondary: #51606f;
    --md-sys-color-secondary-container: #d5e4f7;
    
    --md-sys-color-tertiary: #68587a;
    --md-sys-color-tertiary-container: #eedcff;

    --md-sys-color-error: #ba1a1a;
    
    --md-sys-color-background: #f8fdff;
    --md-sys-color-surface: #f8fdff;
    --md-sys-color-surface-container: #f0f4f8;
    
    --md-sys-color-outline: #72777f;
    --md-sys-color-on-surface: #191c1e;
    
    /* Typography */
    --md-sys-typescale-body-large: 400 16px/24px 'Roboto', sans-serif;
    --md-sys-typescale-title-large: 400 22px/28px 'Roboto', sans-serif;
    --md-sys-typescale-label-large: 500 14px/20px 'Roboto', sans-serif;
    
    /* Shapes */
    --md-sys-shape-corner-small: 8px;
    --md-sys-shape-corner-medium: 12px;
    --md-sys-shape-corner-large: 16px;
    --md-sys-shape-corner-full: 9999px;
    
    /* Elevation */
    --md-sys-elevation-1: 0 1px 3px 0 rgba(0,0,0,0.12), 0 1px 2px 0 rgba(0,0,0,0.24);
    --md-sys-elevation-2: 0 4px 8px 3px rgba(0,0,0,0.15), 0 1px 3px 0 rgba(0,0,0,0.3);
}

/* Reset */
* { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
body { background: var(--md-sys-color-background); color: var(--md-sys-color-on-surface); font: var(--md-sys-typescale-body-large); padding-bottom: 80px; }

/* Utilities */
.material-symbols-rounded { font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24; font-size: 24px; }
.container { max-width: 1200px; margin: 0 auto; padding: 0 16px; }
.hidden { display: none !important; }

/* --- COMPONENTS --- */

/* 1. Top App Bar */
.top-app-bar {
    position: sticky; top: 0; z-index: 100;
    background: var(--md-sys-color-surface-container);
    height: 64px; display: flex; align-items: center; padding: 0 16px; justify-content: space-between;
    transition: background 0.2s;
}
.top-app-bar.scrolled { background: var(--md-sys-color-surface-container); box-shadow: var(--md-sys-elevation-1); }
.brand { font: var(--md-sys-typescale-title-large); font-weight: 500; display: flex; align-items: center; gap: 8px; color: var(--md-sys-color-on-surface); cursor: pointer;}

/* 2. Buttons (M3 Specs) */
.btn {
    height: 40px; border-radius: 20px; padding: 0 24px; border: none; cursor: pointer;
    font: var(--md-sys-typescale-label-large); display: inline-flex; align-items: center; gap: 8px; justify-content: center;
    transition: 0.2s cubic-bezier(0.2, 0, 0, 1);
    position: relative; overflow: hidden;
}
.btn-filled { background: var(--md-sys-color-primary); color: var(--md-sys-color-on-primary); }
.btn-filled:hover { box-shadow: var(--md-sys-elevation-1); opacity: 0.92; }
.btn-filled:active { transform: scale(0.98); }

.btn-tonal { background: var(--md-sys-color-secondary-container); color: var(--md-sys-color-on-primary-container); }
.btn-icon { width: 48px; height: 48px; border-radius: 50%; background: transparent; border: none; color: var(--md-sys-color-on-surface); cursor: pointer; display: flex; align-items: center; justify-content: center; }
.btn-icon:hover { background: rgba(0,0,0,0.05); }

/* 3. Cards (Product) */
.card-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(170px, 1fr)); gap: 16px; padding: 16px; }
.md-card {
    background: var(--md-sys-color-surface);
    border-radius: var(--md-sys-shape-corner-medium);
    border: 1px solid var(--md-sys-color-outline);
    overflow: hidden; display: flex; flex-direction: column;
    transition: 0.2s; cursor: pointer;
}
.md-card:hover { border-color: transparent; box-shadow: var(--md-sys-elevation-1); transform: translateY(-2px); }
.card-media { height: 160px; background: #eee; position: relative; }
.card-media img { width: 100%; height: 100%; object-fit: cover; }
.card-content { padding: 16px; display: flex; flex-direction: column; gap: 4px; }
.headline { font-weight: 500; font-size: 16px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.subhead { font-size: 14px; color: var(--md-sys-color-secondary); }
.price-tag { font-size: 18px; font-weight: 600; color: var(--md-sys-color-primary); margin-top: 8px; }

/* 4. Search Bar (Floating) */
.search-bar-container { padding: 16px; }
.search-bar {
    background: var(--md-sys-color-surface-container);
    height: 56px; border-radius: 28px;
    display: flex; align-items: center; padding: 0 16px;
    box-shadow: none; transition: 0.2s;
}
.search-bar:focus-within { background: var(--md-sys-color-surface); box-shadow: var(--md-sys-elevation-1); }
.search-input { border: none; background: transparent; flex: 1; height: 100%; font-size: 16px; margin-left: 12px; outline: none; }

/* 5. Navigation Rail / Drawer (Mobile Bottom Bar) */
.nav-bar {
    position: fixed; bottom: 0; left: 0; width: 100%;
    height: 80px; background: var(--md-sys-color-surface-container);
    display: flex; justify-content: space-around; align-items: center;
    border-top: 1px solid rgba(0,0,0,0.05); z-index: 90;
}
.nav-item {
    display: flex; flex-direction: column; align-items: center; gap: 4px;
    color: var(--md-sys-color-secondary); font-size: 12px; font-weight: 500;
    cursor: pointer; width: 64px; padding: 8px 0; border-radius: 16px;
}
.nav-item.active { color: var(--md-sys-color-on-surface); }
.nav-item.active .icon-box { background: var(--md-sys-color-secondary-container); color: var(--md-sys-color-on-secondary-container); }
.icon-box { width: 64px; height: 32px; border-radius: 16px; display: flex; align-items: center; justify-content: center; transition: 0.2s; }

/* 6. FAB (Floating Action Button) */
.fab {
    position: fixed; bottom: 100px; right: 16px;
    width: 56px; height: 56px; border-radius: 16px;
    background: var(--md-sys-color-tertiary-container);
    color: var(--md-sys-color-tertiary);
    display: flex; align-items: center; justify-content: center;
    box-shadow: var(--md-sys-elevation-1); cursor: pointer; transition: 0.3s;
    z-index: 95;
}
.fab:hover { box-shadow: var(--md-sys-elevation-2); transform: scale(1.05); }

/* 7. Dialog/Modal */
.modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.32); z-index: 200; display: flex; align-items: center; justify-content: center; opacity: 0; animation: fadeIn 0.2s forwards; }
.modal-dialog {
    background: var(--md-sys-color-surface); min-width: 320px; max-width: 90%;
    border-radius: 28px; padding: 24px; box-shadow: var(--md-sys-elevation-2);
    transform: scale(0.9); animation: scaleIn 0.2s forwards;
}

@keyframes fadeIn { to { opacity: 1; } }
@keyframes scaleIn { to { transform: scale(1); } }

/* Desktop adjustments */
@media (min-width: 800px) {
    .container { padding: 0 24px; }
    .nav-bar { display: none; } /* Use Sidebar for desktop if needed */
    .card-grid { grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); }
}
